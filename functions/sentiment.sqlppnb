{"cells":[{"kind":1,"language":"markdown","value":"Sentiment Analysis using an AI Function. This is to return the sentiment for a single Patient's visit note. The contents is kept confidential and only a general sentiment level is provided to the Doctor on the frontend. This required updating model association with API Key and Token in Capella post AI Function deployment."},{"kind":2,"language":"SQL++","value":"SELECT p.patient_name,\n       p.visit_date,\n       p.visit_notes,\n       default:ai_sentiment({\n           \"text\": p.visit_notes,\n           \"temperature\": 0.3,\n           \"max_tokens\": 500\n       }) AS visit_sentiment\nFROM `Patient` AS p\nLIMIT 1;"},{"kind":2,"language":"SQL++","value":"# Returned\n[\n  {\n    \"patient_name\": \"Maria Garcia\",\n    \"visit_date\": \"2023-12-28\",\n    \"visit_notes\": \"Energy is low today. Cough is about the same.\",\n    \"visit_sentiment\": [\n      {\n        \"response\": \"negative\"\n      }\n    ]\n  }\n]"}]}